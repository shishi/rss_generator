#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative "../lib/rss_generator"

# ヘルプ表示
if ARGV.include?("--help") || ARGV.include?("-h")
  puts <<~HELP
    Usage: bin/generate [config_path] [output_dir]

    Arguments:
      config_path  Path to config file or directory (default: config/sites)
                   - File: single YAML file with sites array
                   - Directory: loads all *.yml files alphabetically
      output_dir   Output directory for RSS feeds (default: output)

    Examples:
      bin/generate                           # Use defaults (config/sites/)
      bin/generate config/sites.yml          # Single config file
      bin/generate config/sites              # Directory of config files
      bin/generate config/sites output       # Custom output dir
  HELP
  exit 0
end

config_path = ARGV[0] || "config/sites"
output_dir = ARGV[1] || "output"

puts "RSS Generator starting..."
puts "Config: #{config_path}"
puts "Output: #{output_dir}"
puts "-" * 40

RssGenerator.new(config_path, output_dir).run

puts "-" * 40
puts "Done!"
